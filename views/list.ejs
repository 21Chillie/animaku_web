<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My List | AnimaKu</title>
    <!-- Favicon -->
    <link
      rel="shortcut icon"
      href="/images/icons/favicon.ico"
      type="image/x-icon"
    />

    <!-- Remix Icon -->
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.6.0/fonts/remixicon.css"
      rel="stylesheet"
    />

    <!-- CSS Stuff -->
    <link rel="stylesheet" href="/css/tailwind.css" />
    <link rel="stylesheet" href="/css/styles.css" />

    <!-- Static JS -->
    <script src="/js/navbar.js" defer></script>
    <script src="/js/browse.js" defer></script>
    <script src="/js/modal.js" defer></script>
  </head>
  <body>
    <header><%- include('partials/navbar.ejs') %></header>

    <main class="mx-auto my-4 w-screen max-w-screen-xl lg:my-12 min-h-screen">
      <div class="text-gray-200">
        <!-- Main Content Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 px-4 pt-2 xl:p-0">
          <!-- Main Content -->
          <div
            class="lg:col-span-3 bg-[#3b4252] rounded-xl overflow-hidden shadow-lg"
          >
            <!-- Table Header -->
            <div
              class="bg-[#3b4252] px-4 py-3 border-b border-[#4c566a] max-md:hidden"
            >
              <div
                class="grid grid-cols-12 gap-4 text-sm font-medium text-gray-300"
              >
                <div class="col-span-6">Title</div>
                <div class="col-span-2">Score</div>
                <div class="col-span-2">Category</div>
                <div class="col-span-2">Status</div>
              </div>
            </div>

            <!-- Table Body -->
            <div class="divide-y divide-[#4c566a]">
              <!-- Row -->
              <% if (list) { %>
              <% list.forEach(item => {%>
              <div
                class="<%= item.type %> px-4 py-3 hover:bg-[#88c0d0] hover:text-[#3b4252] transition-colors max-md:hidden"
              >
                <div class="grid grid-cols-12 gap-6 items-center">
                  <div class="col-span-6 flex items-center gap-3">
                    <img
                      src="<%= item.image %>"
                      alt="Cover"
                      class="w-14 h-18 rounded object-cover"
                    />
                    <a
                      href="/mylist/edit/<%= item.id %>"
                      class="font-medium hover:underline block truncate"
                      ><%= item.title %></a
                    >
                  </div>
                  <!-- Score -->
                  <div class="col-span-2">⭐ <%= item.score %></div>
                  <!-- Category -->
                  <div class="col-span-2">
                    <%= item.type.charAt(0).toUpperCase() + item.type.slice(1)
                    %>
                  </div>
                  <!-- Status -->
                  <div class="col-span-2">
                    <%= item.status.charAt(0).toUpperCase() +
                    item.status.slice(1) %>
                  </div>
                </div>
              </div>

              <!-- Mobile View -->
              <div
                class="md:hidden bg-[#3b4252] rounded-lg p-4 mb-4 hover:bg-[#88c0d0] hover:text-[#3b4252] transition-colors"
              >
                <div class="flex gap-3">
                  <img
                    src="<%= item.image %>"
                    alt="Cover"
                    class="w-20 h-28 rounded-md object-cover flex-shrink-0"
                  />
                  <div class="flex flex-col justify-between text-sm">
                    <div>
                      <a
                        href="/mylist/edit/<%= item.id %>"
                        class="font-semibold text-base hover:underline block truncate"
                      >
                        <%= item.title %>
                      </a>
                      <p class="text-gray-400 mt-1">
                        <span class="font-medium">Category:</span>
                        <%= item.type.charAt(0).toUpperCase() + item.type.slice(1) %>
                      </p>
                      <p class="text-gray-400">
                        <span class="font-medium">Status:</span>
                        <%= item.status.charAt(0).toUpperCase() + item.status.slice(1) %>
                      </p>
                    </div>
                    <div class="mt-2 text-[#88c0d0] font-medium">
                      ⭐ <%= item.score %>
                    </div>
                  </div>
                </div>
              </div>
              <% })} %>
            </div>
          </div>

          <!-- Sidebar Filters -->
          <div class="lg:col-span-1">
            <div class="filter-container bg-[#3b4252] rounded-xl p-6 shadow-lg">
              <!-- Category -->
              <form id="filterForm" class="flex flex-col gap-4">
                <!-- Category -->
                <div>
                  <h3 class="text-sm font-medium text-gray-300 mb-2">
                    Category
                  </h3>
                  <select
                    name="type"
                    class="w-full bg-[#4c566a] border border-gray-600 rounded px-3 py-2 text-gray-100"
                  >
                    <option value="">All</option>
                    <option value="anime">Anime</option>
                    <option value="manga">Manga</option>
                  </select>
                </div>

                <!-- Status -->
                <div>
                  <h3 class="text-sm font-medium text-gray-300 mb-2">Status</h3>
                  <select
                    name="status"
                    class="w-full bg-[#4c566a] border border-gray-600 rounded px-3 py-2 text-gray-100"
                  >
                    <option value="">All</option>
                    <option value="watching">Watching</option>
                    <option value="reading">Reading</option>
                    <option value="completed">Completed</option>
                    <option value="planning">Planning</option>
                    <option value="dropped">Dropped</option>
                  </select>
                </div>

                <!-- Sort -->
                <div>
                  <h3 class="text-sm font-medium text-gray-300 mb-2">
                    Sort By
                  </h3>
                  <select
                    name="sort"
                    class="w-full bg-[#4c566a] border border-gray-600 rounded px-3 py-2 text-gray-100"
                  >
                    <option value="date">Date Added</option>
                    <option value="score">Score</option>
                    <option value="title">Title</option>
                    <option value="progress">Progress</option>
                  </select>
                </div>

                <button
                  type="submit"
                  class="w-full bg-[#88c0d0] hover:bg-[#94d0e0] text-[#3b4252] font-medium py-2 px-4 rounded transition"
                >
                  Apply Filters
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
