<nav class="navbar fixed top-0 w-screen z-100 shadow-md">
	<div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3">
		<!-- Logo -->
		<a href="/" class="flex items-center space-x-2 tracking-wide">
			<img id="navbarBrand" src="/images/animaku-logo-dark.webp" alt="AnimaKu Logo"
					class="logo-img w-32 md:w-40 lg:w-44 object-contain transition-transform duration-300 hover:scale-105" />
		</a>

		<!-- Hamburger Button (Mobile) -->
		<button id="menuToggle"
				class="lg:hidden flex items-center justify-center w-10 h-10 focus:outline-none"
				aria-label="Toggle Menu">
			<i id="menuIcon" class="ri-menu-line text-2xl"></i>
			<i id="closeIcon" class="ri-close-line text-2xl hidden"></i>
		</button>

		<!-- Navigation Links -->
		<div id="navLinks" class="hidden lg:flex items-center space-x-6">
			<a href="/" class="nav-link flex items-center space-x-2">
				<i class="ri-home-5-line text-lg"></i>
				<span>Home</span>
			</a>
			<a href="/browse" class="nav-link flex items-center space-x-2">
				<i class="ri-compass-3-line text-lg"></i>
				<span>Browse</span>
			</a>
			<a href="/my-list" class="nav-link flex items-center space-x-2">
				<i class="ri-list-unordered text-lg"></i>
				<span>My List</span>
			</a>
		</div>

		<!-- Auth Buttons -->
		<div id="authButtons" class="hidden lg:flex items-center space-x-3">
			<% if (!user) { %>
			<a href="/auth/login">
				<button class="btn-filled px-5 py-2">Login</button>
			</a>
			<% } %>

			<!-- Profile menu -->
			<% if (user) { %>
			<div class="dropdown dropdown-bottom dropdown-end">
				<button tabindex="0" role="button" class="m-1">
					<img class="avatar-image w-10 h-10 rounded-full object-cover shrink-0 outline"
							src="<%= user.avatar %>" alt="avatar profile">
				</button>
				<ul tabindex="-1"
						class="dropdown-content menu bg-base-100 rounded-md z-1 w-52 p-2 shadow-md">
					<li>
						<a href="/profile" class="nav-link">Your profile</a>
					</li>
					<li>
						<button class="nav-link" onclick="logoutConfirm.showModal()">Logout</button>
					</li>
				</ul>
			</div>
			<% } %>

			<!-- Theme Toggler -->
			<button id="themeToggle" class="theme-btn flex items-center justify-center text-lg py-1 px-2"
					aria-label="button-toggle-theme">
				<i class="ri-sun-line hidden" id="sunIcon"></i>
				<i class="ri-moon-line" id="moonIcon"></i>
			</button>
		</div>
	</div>

	<!-- Collapsible Menu (Mobile) -->
	<div id="mobileMenu" class="hidden lg:hidden shadow-md">
		<div class="flex flex-col gap-2 px-4">
			<a href="/" class="mobile-link flex items-center gap-2">
				<i class="ri-home-5-line"></i>
				<span>Home</span>
			</a>
			<a href="/browse" class="mobile-link flex items-center gap-2">
				<i class="ri-compass-3-line"></i>
				<span>Browse</span>
			</a>
			<a href="/my-list" class="mobile-link flex items-center gap-2">
				<i class="ri-list-unordered"></i>
				<span>My List</span>
			</a>

			<!-- Mobile Theme Toggler -->
			<button id="themeToggleMobile"
					class="theme-btn flex items-center justify-center p-2 w-full max-w-40">
				<i class="ri-sun-line hidden" id="sunIconMobile"></i>
				<i class="ri-moon-line" id="moonIconMobile"></i>
				<span class="ml-2">Toggle Theme</span>
			</button>
		</div>

		<hr class="my-4">

		<div class="flex flex-col gap-3 px-4">
			<% if (!user) { %>
			<a href="/auth/login">
				<button class="btn-filled w-full max-w-40 py-2">Login</button>
			</a>
			<% } %>

			<% if (user) { %>
			<div class="mobile-profile flex items-center gap-3">
				<img class="avatar-image w-10 h-10 rounded-full object-cover shrink-0 outline"
						src="<%= user.avatar || "/images/portrait-placeholder.webp" %>" alt="profile avatar">
				<div>
					<p class="font-bold"><%= user.username %></p>
					<p class="text-sm"><%= user.email %></p>
				</div>
			</div>

			<div class="mobile-profile-menu flex flex-col gap-1">
				<a href="/profile" class="mobile-link">
					<span>Your profile</span>
				</a>
				<button class="mobile-link text-left" onclick="logoutConfirm.showModal()">
					Logout
				</button>
			</div>
			<% } %>
		</div>
	</div>
</nav>

<dialog id="logoutConfirm" class="modal">
	<div class="modal-box rounded-md">
		<h3 class="text-lg font-bold">Confirm Logout</h3>
		<p class="py-4">This action will end your session. Are you sure you want to continue?
		</p>
		<div class="modal-action flex gap-6">
			<a href="/auth/logout">
				<button class="btn-logout border px-4 py-2 rounded-md">Logout</button>
			</a>
			<form method="dialog">
				<!-- if there is a button in form, it will close the modal -->
				<button class="btn-close px-4 py-2 rounded-md">Close</button>
			</form>
		</div>
	</div>
</dialog>
